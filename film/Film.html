<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yue Chen (Steven) | Cinematic Director</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&family=Unbounded:wght@300;600;800&display=swap" rel="stylesheet">

    <style>
        /* --- 1. VARIABLES --- */
        :root {
            --neon-green: #39ff14;
            --neon-cyan: #00f3ff;
            --glass-dark: rgba(8, 8, 8, 0.95);
            --glass-border: rgba(255, 255, 255, 0.12);
            
            --font-display: 'Unbounded', sans-serif;
            --font-body: 'Inter', sans-serif;

            /* Luxury Easing */
            --ease-cinema: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-scan: cubic-bezier(0.4, 0, 0.2, 1);
            
            --anim-speed: 1s;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: #020202;
            color: #f0f0f0;
            font-family: var(--font-body);
            height: 100vh; width: 100vw; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
            perspective: 2000px;
            cursor: default;
        }

        /* --- 2. DYNAMIC BACKGROUND --- */
        #bg-container {
            position: fixed; top: -10%; left: -10%; width: 120%; height: 120%;
            z-index: 0; overflow: hidden;
            transform: translate(var(--move-x-slow), var(--move-y-slow));
            transition: transform 0.5s linear;
        }

        #bg-layer {
            width: 100%; height: 100%;
            background-image: radial-gradient(circle at center, rgba(0,0,0,0.1) 0%, #000 90%), 
                              url('cinematic_shelves_bg.jpg');
            background-size: cover; background-position: center;
            filter: grayscale(30%) contrast(115%) brightness(0.8);
        }

        #focus-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            filter: blur(50px) brightness(0.3);
            opacity: 0; transition: opacity 1s ease;
            z-index: 1; pointer-events: none; transform: scale(1.2);
        }
        body.mode-active #focus-bg { opacity: 1; }

        /* Focus Mode Blur */
        body.mode-active #bg-container { 
            filter: blur(40px) brightness(0.1); 
            transform: scale(1.1); 
            transition: 1s var(--ease-cinema); 
        }
        
        /* --- 3. SHELF STRUCTURE (Optimized for Fit) --- */
        .library-wrapper {
            width: 85vw; max-width: 1600px; 
            height: 85vh; /* Reduced to fit vertical space better */
            display: flex; flex-direction: column; justify-content: center;
            transform-style: preserve-3d;
            transition: transform 1s var(--ease-cinema), opacity 0.5s;
            z-index: 10;
        }

        body.mode-active .library-wrapper { transform: translateZ(-2000px); opacity: 0; pointer-events: none; }

        .shelf-row {
            position: relative; width: 100%; 
            height: 220px; /* Reduced from 280px to fit Honors */
            margin-bottom: 25px;
            display: flex; align-items: flex-end; 
            padding-left: 260px; padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.08); 
            background: linear-gradient(to right, rgba(0,0,0,0.8) 0%, transparent 100%);
            transform-style: preserve-3d;
        }

        .category-marker {
            position: absolute; left: 0; bottom: 20px;
            width: 240px; height: 100%;
            display: flex; flex-direction: column; justify-content: flex-end;
            border-right: 1px solid var(--neon-green);
            padding-right: 20px;
        }
        .cat-index { font-family: var(--font-display); font-weight: 200; font-size: 3.5rem; color: rgba(255,255,255,0.1); line-height: 0.8; align-self: flex-end; }
        .cat-title { font-family: var(--font-display); font-weight: 800; font-size: 1rem; color: #fff; text-transform: uppercase; letter-spacing: 2px; text-align: right; margin-top: 10px; text-shadow: 0 0 10px rgba(57, 255, 20, 0.3); }
        .cat-sub { font-family: var(--font-body); font-size: 0.55rem; color: var(--neon-green); text-transform: uppercase; letter-spacing: 1px; text-align: right; margin-top: 5px; opacity: 0.8; }

        /* --- 4. ITEMS --- */
        .disc-spine {
            width: 55px; height: 180px; /* Scaled down slightly */
            flex-shrink: 0; margin-right: 12px;
            background-size: cover; background-position: center; 
            border: 1px solid rgba(255,255,255,0.15); border-bottom: none; border-radius: 2px 2px 0 0;
            cursor: pointer; position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top: 20px;
            transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); transform-origin: bottom center;
        }
        
        /* Dark overlay */
        .disc-spine::before { content:''; position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); transition: 0.3s; z-index: 1; }
        
        /* God Ray Scan Effect on Hover */
        .disc-spine::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: skewX(-25deg); z-index: 2; pointer-events: none;
        }
        .disc-spine:hover::after { animation: scan 0.6s ease-out forwards; }
        @keyframes scan { from { left: -100%; } to { left: 200%; } }

        .disc-spine:hover { transform: translateY(-30px) scale(1.05); z-index: 100; border-color: #fff; box-shadow: 0 20px 50px rgba(0,0,0,0.9), 0 0 30px var(--neon-sub); }
        .disc-spine:hover::before { opacity: 0.4; }

        .spine-text {
            writing-mode: vertical-rl; font-family: var(--font-display); 
            font-size: 0.75rem; font-weight: 600; color: #fff; letter-spacing: 3px;
            text-transform: uppercase; white-space: nowrap; z-index: 3; 
            text-shadow: 0 2px 10px #000; margin-top: 5px; pointer-events: none;
        }
        .disc-spine:hover .spine-text { color: var(--neon-green); }

        /* Trophies (Smaller) */
        .trophy-wrap { 
            height: 120px; width: 90px; /* Reduced for visibility */
            flex-shrink: 0; cursor: pointer; position: relative; margin-right: 20px; 
            transition: transform 0.3s var(--ease-cinema); margin-bottom: -5px; 
            display: flex; align-items: flex-end; justify-content: center;
        }
        .trophy-wrap img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 5px 10px #000); }
        .trophy-wrap:hover { transform: scale(1.15) translateY(-10px); }

        .prop-frame, .prop-clapper { height: 140px; width: 100px; flex-shrink: 0; cursor: pointer; display: flex; align-items: flex-end; margin-right:15px; transition:0.3s; }
        .prop-frame img, .prop-clapper img { width:100%; height:100%; object-fit:contain; filter:drop-shadow(0 5px 15px #000); }
        .prop-frame:hover, .prop-clapper:hover { transform: scale(1.1) translateY(-10px); }

        .book { width: 30px; height: 160px; background: #1a1a1a; border: 1px solid rgba(255,255,255,0.1); margin-right: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; flex-shrink: 0; }
        .book:hover { transform: translateY(-15px); background: #222; border-color: var(--neon-green); }
        .book span { writing-mode: vertical-rl; color: #fff; font-family: var(--font-display); font-size: 0.55rem; font-weight: 700; letter-spacing: 3px; }
        
        .bottom-shelf-img { height: 180px; object-fit: contain; margin-bottom: 0; cursor: pointer; filter: grayscale(100%); transition: 0.4s; }
        .bottom-shelf-img:hover { filter: grayscale(0%); transform: scale(1.02); }

        /* --- 5. ANIMATION RIG --- */
        #focus-scene {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 50;
            display: flex; align-items: center; justify-content: center;
            perspective: 2500px;
        }

        .case-assembly {
            width: 380px; height: 560px; position: relative;
            transform-style: preserve-3d; opacity: 0; transform: scale(0.7) translateY(200px) rotateY(20deg);
            transition: transform var(--anim-speed) var(--ease-cinema), opacity 0.5s ease;
            will-change: transform, opacity;
        }
        .case-assembly.active { opacity: 1; transform: translateX(-22vw) translateY(0) scale(1) rotateY(5deg); }

        .case-cover {
            position: absolute; top:0; left:0; width: 100%; height: 100%;
            background-color: #0a0a0a; background-size: cover; background-position: center;
            transform-origin: left; transition: transform 1.2s var(--ease-cinema); 
            z-index: 5; border: 1px solid rgba(255,255,255,0.2); 
            box-shadow: 30px 30px 100px rgba(0,0,0,0.9);
        }
        .case-cover::after { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 40%, rgba(255,255,255,0.05) 100%); }
        .case-assembly.open .case-cover { transform: rotateY(-180deg); }

        .case-inside { position: absolute; width: 100%; height: 100%; background: #080808; border: 1px solid #333; z-index: 1; display: flex; align-items: center; justify-content: center; box-shadow: inset 0 0 150px #000; }

        .disc-track { position: absolute; width: 340px; height: 340px; transform: translateX(0); transition: transform 1.2s var(--ease-cinema); z-index: 2; }
        .disc-spinner { width: 100%; height: 100%; border-radius: 50%; background: radial-gradient(circle, transparent 15%, #050505 16%), url(''); background-size: cover; background-position: center; box-shadow: 0 0 20px #000; position: relative; }
        .disc-spinner::after { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; border-radius: 50%; background: conic-gradient(from 0deg, transparent 0%, rgba(255,255,255,0.3) 10%, rgba(0,243,255,0.4) 20%, rgba(255,0,221,0.4) 30%, transparent 40%, rgba(255,255,255,0.2) 60%, transparent 100%); mix-blend-mode: overlay; opacity: 0.6; pointer-events: none; }
        .disc-spinner::before { content: ''; position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); width: 18%; height: 18%; border-radius: 50%; background: #000; border: 1px solid #333; }

        .case-assembly.extract .disc-track { transform: translateX(210px); }
        .case-assembly.extract .disc-spinner { animation: spin 4s linear infinite; box-shadow: 0 0 50px var(--neon-cyan); }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- 6. INFO PANEL --- */
        #panel {
            position: fixed; top: 0; right: 0; width: 45vw; height: 100%;
            background: var(--glass-dark); backdrop-filter: blur(40px);
            border-left: 1px solid var(--glass-border);
            transform: translateX(100%); transition: transform 0.9s var(--ease-cinema);
            z-index: 60; display: flex; flex-direction: column; padding: 80px 60px; overflow-y: auto;
        }
        body.mode-active #panel { transform: translateX(0); }

        .p-header { border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 30px; margin-bottom: 40px; }
        h1 { font-family: var(--font-display); font-size: 3rem; text-transform: uppercase; font-weight: 800; color: #fff; line-height: 0.9; }
        h2 { font-family: var(--font-display); font-size: 0.9rem; color: var(--neon-green); letter-spacing: 4px; text-transform: uppercase; margin-top: 10px; }

        .vid-box {
            width: 100%; aspect-ratio: 16/9; background: #000; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 40px;
            position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; cursor: pointer;
        }
        .vid-box:hover { border-color: var(--neon-green); }
        .vid-box img { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; transition: 0.5s; }
        .vid-box:hover img { opacity: 0.3; transform: scale(1.05); }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 5rem; color: #fff; transition: 0.3s; pointer-events: none; }
        .vid-box:hover .play-icon { transform: translate(-50%, -50%) scale(1.2); color: var(--neon-green); text-shadow: 0 0 30px var(--neon-green); }

        .desc { font-family: var(--font-body); font-size: 1rem; color: #aaa; line-height: 1.8; margin-bottom: 50px; font-weight: 300; max-width: 90%; }
        
        .gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .thumb { aspect-ratio: 16/9; background: #222; cursor: pointer; border: 1px solid transparent; transition: 0.3s; opacity: 0; transform: translateY(20px); }
        .thumb img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%); transition: 0.3s; }
        .thumb:hover { border-color: var(--neon-green); transform: scale(1.05); }
        .thumb:hover img { filter: grayscale(0%); }

        body.mode-active .thumb { animation: fadeUp 0.6s forwards ease-out; }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
        body.mode-active .thumb:nth-child(1) { animation-delay: 0.6s; }
        body.mode-active .thumb:nth-child(2) { animation-delay: 0.7s; }
        body.mode-active .thumb:nth-child(3) { animation-delay: 0.8s; }

        /* Close Button */
        #close-matte { position: fixed; top:0; left:0; width:100%; height:100%; z-index: 40; display:none; cursor: zoom-out; }
        body.mode-active #close-matte { display: block; }
        .close-btn { 
            position: absolute; top:40px; right:40px; background:transparent; 
            border: 1px solid rgba(255,255,255,0.3); color:#fff; padding:15px 30px; 
            font-family: var(--font-display); font-size: 0.8rem; letter-spacing: 2px;
            cursor:pointer; text-transform:uppercase; transition:0.3s; 
        }
        .close-btn:hover { background: var(--neon-green); color:#000; border-color: var(--neon-green); }

        /* Modal */
        #modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 100; display:none; align-items:center; justify-content:center; opacity:0; transition: opacity 0.3s; }
        #modal.open { display: flex; opacity: 1; }
        .modal-box { background:#0a0a0a; padding:60px; border:1px solid var(--neon-green); max-width:700px; text-align:center; box-shadow:0 0 100px rgba(57,255,20,0.15); transform: scale(0.9); transition: transform 0.3s; }
        #modal.open .modal-box { transform: scale(1); }
        .modal-box h3 { font-family: var(--font-display); color: var(--neon-green); font-size: 2rem; margin-bottom: 20px; text-transform: uppercase; }
        .modal-box p { font-family: var(--font-body); color: #ccc; font-size: 1rem; line-height: 1.6; margin-bottom: 30px; }
        
        .platform-btn {
            display: inline-block; margin: 10px; padding: 15px 30px;
            background: #222; border: 1px solid #444; color: #fff;
            text-decoration: none; font-family: var(--font-display); text-transform: uppercase;
            transition: 0.3s; font-size: 0.8rem;
        }
        .platform-btn:hover { background: var(--neon-green); color: #000; border-color: var(--neon-green); }

    </style>
</head>
<body>

    <div id="focus-bg"></div>
    <div id="bg-container">
        <div id="bg-layer"></div>
    </div>
    <div id="close-matte" onclick="closeP()"></div>

    <div class="library-wrapper">
        
        <!-- ROW 1: AWARDS (RESIZED TO FIT) -->
        <div class="shelf-row" style="height: 180px; padding-bottom: 10px;">
            <div class="category-marker">
                <span class="cat-index">01</span>
                <span class="cat-title">Honors</span>
                <span class="cat-sub">Awards & Recog</span>
            </div>
            <div class="trophy-wrap" onclick="showModal('53rd USA Film Festival', 'Finalist')"><img src="trophy_gold.png"></div>
            <div class="trophy-wrap" onclick="showModal('NY Int Film Awards', 'Grand Jury Prize')"><img src="trophy_silver.png"></div>
            <div class="trophy-wrap" onclick="showModal('Awards Portfolio', 'Selections')"><img src="trophy_bronze.png"></div>
        </div>

        <!-- ROW 2: COMMERCIALS -->
        <div class="shelf-row" id="row-comm">
            <div class="category-marker">
                <span class="cat-index">02</span>
                <span class="cat-title">Commercial</span>
                <span class="cat-sub">TVC / Advertising</span>
            </div>
        </div>

        <!-- ROW 3: FILM -->
        <div class="shelf-row" id="row-film">
            <div class="category-marker">
                <span class="cat-index">03</span>
                <span class="cat-title">Narrative</span>
                <span class="cat-sub">Film / Documentary</span>
            </div>
        </div>

        <!-- ROW 4: INFO -->
        <div class="shelf-row" style="border-bottom: none; height: 200px;">
            <div class="category-marker">
                <span class="cat-index">04</span>
                <span class="cat-title">Profile</span>
                <span class="cat-sub">About / Contact</span>
            </div>
            <div class="book" onclick="showModal('Bio', 'MFA USC | BFA SVA')"><span>BIO</span></div>
            <div class="book" style="background:#111" onclick="showModal('Contact', 'kieen1454@gmail.com')"><span>CONTACT</span></div>
            <div class="prop-frame" onclick="showModal('Gear', 'Cameras')"><img src="shelf_framed_photo.png"></div>
            <div class="prop-clapper" onclick="showModal('Production', 'Directing')"><img src="shelf_prop_clapperboard.png"></div>
            <img class="bottom-shelf-img" src="shelf_bottom_row.jpg" onclick="showModal('Studio', 'Info')">
        </div>
    </div>

    <!-- HERO ANIMATION -->
    <div id="focus-scene">
        <div class="case-assembly" id="case-assembly">
            <div class="case-cover" id="anim-cover"></div>
            <div class="case-inside">
                <div class="disc-track">
                    <div class="disc-spinner" id="anim-disc"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- PANEL -->
    <div id="panel">
        <button class="close-btn" onclick="closeP()">Close</button>
        <div class="p-header">
            <h1 id="p-title">Project</h1>
            <h2 id="p-role">Role</h2>
        </div>
        
        <div class="vid-box" id="vid-trigger">
            <img id="p-hero" src="">
            <div class="play-icon" id="play-btn">▶</div>
        </div>

        <p class="desc" id="p-desc">Desc...</p>
        <div class="gallery" id="p-gallery"></div>
    </div>

    <!-- MODAL -->
    <div id="modal">
        <div class="modal-box">
            <h3 id="m-head">TITLE</h3>
            <p id="m-body">Text</p>
            <div id="m-actions"></div>
            <button class="close-btn" style="position:static; margin-top:30px; border-color:var(--neon-green); color:#000; background:var(--neon-green);" onclick="closeModal()">CLOSE</button>
        </div>
    </div>

    <script>
        const data = {
            comm: [
                { title: 'Wuhan Jiudao', role: 'Editor / Colorist | 2025.07', cover: 'images/wuhan_cover.jpg', disc: 'images/wuhan_disc.jpg', imgPrefix: 'wuhan', imgCount: 6, desc: 'Produced an institutional video for Wuhan Jiudao Taoist Company.', links: [{ label: 'WeChat', url: 'https://mp.weixin.qq.com/s/hXrt1FpEUkuQJgpZvSd8tQ' }] },
                { title: 'René Furterer', role: 'Editor | 2025.04', cover: 'images/rene_cover.jpg', disc: 'images/rene_disc.jpg', imgPrefix: 'rene', imgCount: 4, desc: 'Promotional video for Guangzhou Golden Ribbon Public Welfare Project.', links: [{ label: 'WeChat', url: 'https://mp.weixin.qq.com/s/cYBaOpyelteCD5U7np7XwA' }] },
                { title: 'GE HealthCare', role: 'AD | 2023.08', cover: 'images/ge_cover.jpg', disc: 'images/ge_disc.jpg', imgPrefix: 'ge', imgCount: 4, desc: 'Medical commercial. On-site editing.', links: [] },
                { title: 'Feihe Milk', role: 'Producer | 2022.05', cover: 'images/feihe_cover.jpg', disc: 'images/feihe_disc.jpg', imgPrefix: 'feihe', imgCount: 3, desc: 'Special short film for Baby Day.', links: [{ label: 'WeChat', url: 'http://fh528zgbbd.cloud-top.com.cn/?scene=wechat-koc-kol&mz_ca=2299469&mz_sp=8AKJR' }] }
            ],
            film: [
                { title: 'Tumbleweed', role: 'Director | 2024.08', cover: 'images/tumbleweed_cover.jpg', disc: 'images/tumbleweed_disc.jpg', imgPrefix: 'tumbleweed', imgCount: 6, desc: 'Graduation project set in western China.', links: [{ label: 'Baidu Pan', url: 'https://pan.baidu.com/s/1SXGOQOQRrPMyNpA5KLSbug?pwd=8888' }] },
                { title: 'In Every Look', role: 'Director | 2024.10', cover: 'images/everylook_cover.jpg', disc: 'images/everylook_disc.jpg', imgPrefix: 'everylook', imgCount: 6, desc: 'Narrative short.', links: [{ label: 'Bilibili', url: 'https://www.bilibili.com/video/BV1mH9YYLEy2/?share_source=copy_web&vd_source=48900cb351b43eb621345ae7f68bf325' }] },
                { title: 'Healing Wings', role: 'Doc | 2024.10', cover: 'images/healing_cover.jpg', disc: 'images/healing_disc.jpg', imgPrefix: 'healing', imgCount: 6, desc: 'Documentary.', links: [] },
                { title: 'Reason to Lie', role: 'Colorist | 2024.10', cover: 'images/reason_cover.jpg', disc: 'images/reason_disc.jpg', imgPrefix: 'reason', imgCount: 6, desc: 'Suspense short.', links: [{ label: 'Baidu Pan', url: 'https://pan.baidu.com/s/14J02p1QUOHUMcIonuLXpyw?pwd=8888' }] },
                { title: 'Papa and Pluto', role: 'Producer | 2023.09', cover: 'images/papa_cover.jpg', disc: 'images/papa_disc.jpg', imgPrefix: 'papa', imgCount: 4, desc: 'Dark suspense.', links: [{ label: 'Baidu Pan', url: 'https://pan.baidu.com/s/1sjfUbMeWceF_hZZQkUS6yQ?pwd=8888' }] },
                { title: 'Alone', role: 'Director | 2022.08', cover: 'images/alone_cover.jpg', disc: 'images/alone_disc.jpg', imgPrefix: 'alone', imgCount: 12, desc: 'NYC narrative.', links: [{ label: 'Xinpianchang', url: 'https://www.xinpianchang.com/a12617120?from=UserProfile' }] },
                { title: 'Power Failure', role: 'Director | 2021.12', cover: 'images/power_cover.jpg', disc: 'images/power_disc.jpg', imgPrefix: 'power', imgCount: 6, desc: 'Short film.', links: [{ label: 'Bilibili', url: 'https://www.bilibili.com/video/BV1a3411v75i/?share_source=copy_web&vd_source=48900cb351b43eb621345ae7f68bf325' }] },
                { title: 'The Cube', role: 'Director | 2021.04', cover: 'images/cube_cover.jpg', disc: 'images/cube_disc.jpg', imgPrefix: 'cube', imgCount: 6, desc: 'Short film.', links: [{ label: 'Bilibili', url: 'https://www.bilibili.com/video/BV1EU4y1t79w/?share_source=copy_web&vd_source=48900cb351b43eb621345ae7f68bf325' }] },
                { title: 'Invert', role: 'Director | 2020.12', cover: 'images/invert_cover.jpg', disc: 'images/invert_disc.jpg', imgPrefix: 'invert', imgCount: 6, desc: 'Short film.', links: [{ label: 'Bilibili', url: 'https://www.bilibili.com/video/BV1Wt4y1k7h7/?share_source=copy_web&vd_source=48900cb351b43eb621345ae7f68bf325' }] }
            ]
        };

        function render(id, list) {
            const row = document.getElementById(id);
            list.forEach(p => {
                const el = document.createElement('div'); el.className = 'disc-spine';
                el.style.backgroundImage = `url('${p.cover}')`;
                el.innerHTML = `<span class="spine-text">${p.title}</span>`;
                el.onclick = () => openP(p);
                row.appendChild(el);
            });
        }
        render('row-comm', data.comm);
        render('row-film', data.film);

        function openP(p) {
            const assembly = document.getElementById('case-assembly');
            
            document.getElementById('anim-cover').style.backgroundImage = `url('${p.cover}')`;
            document.getElementById('anim-disc').style.backgroundImage = `url('${p.disc}')`;
            document.getElementById('focus-bg').style.backgroundImage = `url('${p.cover}')`;

            document.getElementById('p-title').innerText = p.title;
            document.getElementById('p-role').innerText = p.role;
            document.getElementById('p-desc').innerText = p.desc;
            document.getElementById('p-hero').src = p.cover;

            const playBtn = document.getElementById('play-btn');
            const vidTrigger = document.getElementById('vid-trigger');
            const newTrigger = vidTrigger.cloneNode(true);
            vidTrigger.parentNode.replaceChild(newTrigger, vidTrigger);
            
            const btnEl = newTrigger.querySelector('#play-btn');

            if (p.links.length === 0) {
                btnEl.style.display = 'none';
                newTrigger.style.cursor = 'default';
            } else {
                btnEl.style.display = 'block';
                newTrigger.style.cursor = 'pointer';
                newTrigger.onclick = () => {
                    if (p.links.length === 1) window.open(p.links[0].url, '_blank');
                    else {
                        let html = '';
                        p.links.forEach(l => { html += `<a href="${l.url}" target="_blank" class="platform-btn">${l.label}</a>`; });
                        showModal('Select Platform', '', html);
                    }
                };
            }

            const g = document.getElementById('p-gallery'); g.innerHTML = '';
            for(let i=1; i<=p.imgCount; i++){
                let d = document.createElement('div'); d.className='thumb';
                d.innerHTML = `<img src="images/${p.imgPrefix}_img_${i}.png" loading="lazy">`;
                g.appendChild(d);
            }

            document.body.classList.add('mode-active');
            assembly.classList.add('active'); 
            setTimeout(() => { assembly.classList.add('open'); }, 350);
            setTimeout(() => { assembly.classList.add('extract'); }, 600);
        }

        function closeP() {
            const assembly = document.getElementById('case-assembly');
            assembly.classList.remove('extract');
            setTimeout(() => { assembly.classList.remove('open'); }, 300);
            setTimeout(() => { assembly.classList.remove('active'); document.body.classList.remove('mode-active'); }, 600);
        }

        function showModal(t, b, actions = '') {
            document.getElementById('m-head').innerHTML = t;
            document.getElementById('m-body').innerHTML = b;
            document.getElementById('m-actions').innerHTML = actions;
            document.getElementById('modal').classList.add('open');
        }
        function closeModal() { document.getElementById('modal').classList.remove('open'); }

        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 2;
            const y = (e.clientY / window.innerHeight - 0.5) * 2;
            const bg = document.getElementById('bg-container').style;
            bg.setProperty('--move-x-slow', `${x * -15}px`); bg.setProperty('--move-y-slow', `${y * -15}px`);
        });

        document.addEventListener('keydown', (e) => { if(e.key==='Escape') closeP(); });

    </script>
</body>
</html>